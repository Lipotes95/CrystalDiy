"use strict";const e=require("./common/vendor.js"),t={data:()=>({imageList:[]}),onLoad(){},props:["num"],mounted(){this.chooseImageFunc()},methods:{chooseImageFunc(){let t=this;e.index.chooseImage({count:t.$props.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){t.uploadFile(e.tempFilePaths)},fail:function(e){t.$emit("getImgs",null)},complete:function(e){}})},uploadFile:function(t){let o=this,i=0,n=t.length,a={token:e.index.getStorageSync("token"),app_id:o.getAppId()};e.index.showLoading({title:"图片上传中"}),t.forEach((function(t,s){e.index.uploadFile({url:o.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:t,name:"iFile",formData:a,success:function(e){let t="object"==typeof e.data?e.data:JSON.parse(e.data);1===t.code?o.imageList.push(t.data):o.showError(t.msg)},complete:function(){i++,n===i&&(e.index.hideLoading(),o.$emit("getImgs",o.imageList))}})}))}}};const o=e._export_sfc(t,[["render",function(e,t,o,i,n,a){return{}}]]);exports.MiniProgramPage=o;
